# 3. ì›¹ ì•± ê°œë°œ

## 8. Spring MVC - BE

### 1) Spring MVC

#### **MVC**(Model View Controller)

* **Model**: ë·°ê°€ ë Œë”ë§í•˜ëŠ” ë° í•„ìš”í•œ ë°ì´í„°.  ì‚¬ìš©ìê°€ ìš”ì²­í•œ ìƒí’ˆ ëª©ë¡ì´ë‚˜, ì£¼ë¬¸ ë‚´ì—­ì´ ì´ì— í•´ë‹¹.
* **View**: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë·°(View)ëŠ” ì‹¤ì œë¡œ ë³´ì´ëŠ” ë¶€ë¶„ì´ë©°, ëª¨ë¸ì„ ì‚¬ìš©í•´ ë Œë”ë§ì„ í•¨. ë·°ëŠ” JSP, JSF, PDF, XMLë“±ìœ¼ë¡œ ê²°ê³¼ë¥¼ í‘œí˜„.
* **Controller**: ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì‚¬ìš©ìì˜ ì•¡ì…˜ì— ì‘ë‹µí•˜ëŠ” ì»´í¬ë„ŒíŠ¸. ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ëª¨ë¸ì„ ì—…ë°ì´íŠ¸í•˜ê³ , ë‹¤ë¥¸ ì•¡ì…˜ì„ ìˆ˜í–‰í•¨.

![](https://cphinf.pstatic.net/mooc/20180219_180/1519003368125BcfqV_PNG/1.png)

**MVC Model 1 ì•„í‚¤í…ì²˜**

> ë¸Œë¼ìš°ì €ê°€ ìš”ì²­í•˜ë©´ í•´ë‹¹ ìš”ì²­ì„ JSPê°€ ë°›ìŒ(ìš”ì²­ë§Œí¼ JSPí˜ì´ì§€ ì¡´ì¬)  ğŸ‘‰ JSPëŠ”  javaë¡œ ë§Œë“¤ì–´ì§„ class ì¸ Java Beanì„ ì´ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ í™”ë©´ì— ì¶œë ¥
>
> ğŸ’£jSPìì²´ì— javaì™€ html ì½”ë“œê°€ ì„ì—¬ìˆì–´ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€

![](https://cphinf.pstatic.net/mooc/20180219_65/1519003382079lUcI5_PNG/2.png)

**MVC Model2 ì•„í‚¤í…ì²˜**

> ìš”ì²­ì„ ì„œë¸”ë¦¿ì´ ë°›ìŒ. ğŸ‘‰ ì„œë¸”ë¦¿ì´ Java Beanì„ ì´ìš©í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë¥¼ êº¼ë‚´ì˜¤ê³  ê·¸ ê²°ê³¼ë¥¼ JSPê°€ í™”ë©´ì— ì¶œë ¥
>
> ì„œë¸”ë¦¿ì€ ìš”ì²­ê³¼ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì—­í• , JSPëŠ” ë·°ì˜ ì—­í•  ğŸ‘‰ ë¡œì§ê³¼ ë·° ë¶„ë¦¬

![](https://cphinf.pstatic.net/mooc/20180219_149/15190034013354diDI_PNG/3.png)

**MVC Model2 ë°œì „í˜•íƒœ**

> í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚´ëŠ” ëª¨ë“  ìš”ì²­ì„ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬(ì„œë¸”ë¦¿ í´ë˜ìŠ¤)ê°€ ë°›ìŒ. ë”± í•˜ë‚˜ë§Œ ì¡´ì¬. ìš”ì²­ë§Œ ë°›ê³  ì‹¤ì œ ì²˜ë¦¬ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì—ê²Œ ìœ„ì„. ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ = í•¸ë“¤ëŸ¬ í´ë˜ìŠ¤
>
> ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì—ì„œ ê´€ë ¨ëœ URLì„ ë‹¤ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ.
>
> ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” Java Beanë“±ì„ ì´ìš©í•´ì„œ ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ë‚´ê³  ê·¸ ê²°ê³¼ë¥¼ ëª¨ë¸ì— ë‹´ì•„ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ê²Œ ë³´ëƒ„. í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì•ìì€ ë·°ì—ê²Œ ëª¨ë¸ì„ ì „ë‹¬í•´ì„œ ê²°ê³¼ ì¶œë ¥

![](https://cphinf.pstatic.net/mooc/20180219_73/1519003417760TqmnB_PNG/4.png)

**Spring Web Module**

Model2 MVC íŒ¨í„´ì„ ì§€ì›í•˜ëŠ” Spring Module, <u>Spring MVC</u>

***

### 2) Spring MVC êµ¬ì„±ìš”ì†Œ

![](https://cphinf.pstatic.net/mooc/20180219_116/1519003779294ejdEx_PNG/1.png)

> 1. ëª¨ë“  ìš”ì²­ì„ Dispatcher Servletì´ë¼ê³  í•˜ëŠ” ì„œë¸”ë¦¿ í´ë˜ìŠ¤ê°€ ë°›ìŒ. 
> 2. ìš”ì²­ì„ ì²˜ë¦¬í•´ì¤„ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë©”ì†Œë“œê°€ ë¬´ì—‡ì¸ì§€ Handler Mappingì—ê²Œ ë¬¼ì–´ë´„. - ì–´ë–¤ ìš”ì²­ì— ì–´ë–¤ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë™ì‘í• ì§€ xmlíŒŒì¼ì´ë‚˜ javaíŒŒì¼ì— ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì„¤ì •í•˜ëŠ”ë° ì´ ì •ë³´ë“¤ì„ Handler Mapping ê°ì²´ë“¤ì´ ê´€ë¦¬í•˜ëŠ” ê²ƒ
>
> 3. Handler Adapterì—ê²Œ ì‹¤í–‰ ìš”ì²­ 
> 4. ê²°ì •ëœ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ í•´ë‹¹ ë©”ì†Œë“œ ì‹¤í–‰ 
> 5. ì‹¤í–‰ê²°ê³¼ë¥¼ Modelì— ë°›ì•„ì„œ Dispatcher Servletì—ê²Œ ì „ë‹¬. 
> 6. ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë¦¬í„´í•œ view nameì„ ê°€ì§€ê³  ì ì ˆí•œ view resolverë¥¼ í†µí•´ì„œ ë·°ë¥¼ ì¶œë ¥ 
> 7. 8.  View Resolverê°€ ì–´ë–¤ Viewë‹¤ ë¼ëŠ” ì •ë³´ë¥¼ ì•Œë ¤ì£¼ë©´ í•´ë‹¹ Viewë¡œ ì‘ë‹µ

ğŸ‘‰ **Spring MVCë¥¼ ì´í•´í•˜ëŠ” ê²ƒ = Dispatcher Servletì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ” ì§€ ì´í•´í•˜ëŠ” ê²ƒ**



#### DispatcherServlet

- í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ (Front Controller)

- í´ë¼ì´ì–¸íŠ¸ì˜ ëª¨ë“  ìš”ì²­ì„ ë°›ì€ í›„ ì´ë¥¼ ì²˜ë¦¬í•  í•¸ë“¤ëŸ¬ì—ê²Œ ë„˜ê¸°ê³  í•¸ë“¤ëŸ¬ê°€ ì²˜ë¦¬í•œ ê²°ê³¼ë¥¼ ë°›ì•„ ì‚¬ìš©ìì—ê²Œ ì‘ë‹µ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤€ë‹¤.

- DispathcerServletì€ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ìš©í•´ ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤.

  *ì´ë¡ ì ìœ¼ë¡œëŠ” í•œ ê°œ ì´ìƒ ì„ ì–¸ ê°€ëŠ¥ BUT ë³´í†µ í•œ ê°œ ì‚¬ìš©*

**DispatcherServlet ë‚´ë¶€ ë™ì‘íë¦„**

![](https://cphinf.pstatic.net/mooc/20180219_281/1519003870301bOehw_PNG/2.png)



**DispatcherServlet ë‚´ë¶€ ë™ì‘íë¦„ ìƒì„¸ - ìš”ì²­ ì„ ì²˜ë¦¬ ì‘ì—…**

![](https://cphinf.pstatic.net/mooc/20180219_91/1519003885824QT31y_PNG/3.png)

> **org.springframework.web.servlet.LocaleResolver**
>
> - ì§€ì—­ ì •ë³´ë¥¼ ê²°ì •í•´ì£¼ëŠ” ì „ëµ ì˜¤ë¸Œì íŠ¸ì´ë‹¤.
> - ë””í´íŠ¸ì¸ AcceptHeaderLocalResolverëŠ” HTTP í—¤ë”ì˜ ì •ë³´ë¥¼ ë³´ê³  ì§€ì—­ì •ë³´ë¥¼ ì„¤ì •í•´ì¤€ë‹¤.
> - ë¸Œë¼ìš°ì €ê°€ ë³´ë‚´ëŠ” í—¤ë” ì •ë³´ì—ì„œ ì–¸ì–´ ì„¤ì • ê°’ë“¤ì„ ì´ìš©í•´ì„œ locale ê²°ì •
>
> **org.springframework.web.context.request.RequestContextHolder**
>
> - ì¼ë°˜ ë¹ˆì—ì„œ HttpServletRequest, HttpServletResponse, HttpSession ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
> - í•´ë‹¹ ê°ì²´ë¥¼ ì¼ë°˜ ë¹ˆì—ì„œ ì‚¬ìš©í•˜ê²Œ ë˜ë©´, Webì— ì¢…ì†ì ì´ ë  ìˆ˜ ìˆë‹¤.
> - ìŠ¤ë ˆë“œ ë¡œì»¬ ê°ì²´
>
> **org.springframework.web.servlet.FlashMapManager**
>
> - FlashMapê°ì²´ë¥¼ ì¡°íšŒ(retrieve) & ì €ì¥ì„ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤
> - RedirectAttributesì˜ addFlashAttributeë©”ì†Œë“œë¥¼ ì´ìš©í•´ì„œ ì €ì¥í•œë‹¤.
> - ë¦¬ë‹¤ì´ë ‰íŠ¸ í›„ ì¡°íšŒë¥¼ í•˜ë©´ ë°”ë¡œ ì •ë³´ëŠ” ì‚­ì œëœë‹¤.
> - Spring 3ì—ì„œ ì¶”ê°€ëœ ê¸°ëŠ¥, redirectë¡œ ê°’ì„ ì „ë‹¬í•  ë•Œ ì‚¬ìš©
>
> **org.springframework.web.multipart.MultipartResolver**
>
> - ë©€í‹°íŒŒíŠ¸ íŒŒì¼ ì—…ë¡œë“œë¥¼ ì²˜ë¦¬í•˜ëŠ” ì „ëµ



**DispatcherServlet ë‚´ë¶€ ë™ì‘íë¦„ ìƒì„¸ - ìš”ì²­ ì „ë‹¬**

![](https://cphinf.pstatic.net/mooc/20180219_20/1519003954110F9wyd_PNG/4.png)

> **org.springframework.web.servlet.HandlerMapping**
>
> - HandlerMappingêµ¬í˜„ì²´ëŠ” ì–´ë–¤ í•¸ë“¤ëŸ¬ê°€ ìš”ì²­ì„ ì²˜ë¦¬í• ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì•Œê³  ìˆë‹¤.
> - ë””í´íŠ¸ë¡œ ì„¤ì •ë˜ëŠ” ìˆëŠ” í•¸ë“¤ëŸ¬ë§¤í•‘ì€ BeanNameHandlerMappingê³¼ DefaultAnnotationHandlerMapping 2ê°€ì§€ê°€ ì„¤ì •ë˜ì–´ ìˆë‹¤.
>
> **org.springframework.web.servlet.HandlerExecutionChain**
>
> - HandlerExecutionChainêµ¬í˜„ì²´ëŠ” ì‹¤ì œë¡œ í˜¸ì¶œëœ í•¸ë“¤ëŸ¬ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ê°€ì§€ê³  ìˆë‹¤.
> - ì¦‰, ë¬´ì—‡ì´ ì‹¤í–‰ë˜ì–´ì•¼ ë ì§€ ì•Œê³  ìˆëŠ” ê°ì²´ë¼ê³  ë§í•  ìˆ˜ ìˆìœ¼ë©°, í•¸ë“¤ëŸ¬ ì‹¤í–‰ì „ê³¼ ì‹¤í–‰í›„ì— ìˆ˜í–‰ë  HandlerInterceptorë„ ì°¸ì¡°í•˜ê³  ìˆë‹¤.
> - ë°œê²¬í•˜ì§€ ëª»í•˜ë©´ ì›¹í˜ì´ì§€ê°€ ì—†ëŠ” ê²ƒì´ë¯€ë¡œ 404ì—ëŸ¬
>
> **org.springframework.web.servlet.HandlerAdapter**
>
> - ì‹¤ì œ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•œë‹¤.
> - í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ëŠ” ì„ íƒëœ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ê³¼ ì‘ë‹µì„ ModelAndViewë¡œ ë³€í™”í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œê³  ìˆë‹¤.
> - ë””í´íŠ¸ë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ” í•¸ë“¤ëŸ¬ì–´ëŒ‘í„°ëŠ” HttpRequestHandlerAdapter, SimpleControllerHandlerAdapter, AnnotationMethodHanlderAdapter 3ê°€ì§€ì´ë‹¤.
> - @RequestMappingê³¼ @Controller ì• ë…¸í…Œì´ì…˜ì„ í†µí•´ ì •ì˜ë˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ê²½ìš° DefaultAnnotationHandlerMappingì— ì˜í•´ í•¸ë“¤ëŸ¬ê°€ ê²°ì •ë˜ê³ , ê·¸ì— ëŒ€ì‘ë˜ëŠ” AnnotationMethodHandlerAdapterì— ì˜í•´ í˜¸ì¶œì´ ì¼ì–´ë‚œë‹¤. -> <u>ì‹¤ìŠµ</u>



**DispatcherServlet ë‚´ë¶€ ë™ì‘íë¦„ ìƒì„¸ - ìš”ì²­ ì²˜ë¦¬**

![](https://cphinf.pstatic.net/mooc/20180219_167/1519004040926yL8eC_PNG/5.png)

> **org.springframework.web.servlet.ModelAndView**
>
> - ModelAndViewëŠ” Controllerì˜ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤„ viewì™€ viewì—ì„œ ì‚¬ìš©í•  ê°’ì„ ì „ë‹¬í•˜ëŠ” í´ë˜ìŠ¤ì´ë‹¤.
>
> **org.springframework.web.servlet.RequestToViewNameTranslator**
>
> - ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë·° ì´ë¦„ì´ë‚˜ ë·° ì˜¤ë¸Œì íŠ¸ë¥¼ ì œê³µí•´ì£¼ì§€ ì•Šì•˜ì„ ê²½ìš° URLê³¼ ê°™ì€ ìš”ì²­ì •ë³´ë¥¼ ì°¸ê³ í•´ì„œ ìë™ìœ¼ë¡œ ë·° ì´ë¦„ì„ ìƒì„±í•´ì£¼ëŠ” ì „ëµ ì˜¤ë¸Œì íŠ¸ì´ë‹¤. ë””í´íŠ¸ëŠ” DefaultRequestToViewNameTranslatorì´ë‹¤.



**DispatcherServlet ë‚´ë¶€ ë™ì‘íë¦„ ìƒì„¸ - ì˜ˆì™¸ì²˜ë¦¬**

![](https://cphinf.pstatic.net/mooc/20180219_26/1519004078279fGdRP_PNG/6.png)

> **org.springframework.web.servlet.handlerexceptionresolver**
>
> - ê¸°ë³¸ì ìœ¼ë¡œ DispatcherServletì´ DefaultHandlerExceptionResolverë¥¼ ë“±ë¡í•œë‹¤.
> - HandlerExceptionResolverëŠ” ì˜ˆì™¸ê°€ ë˜ì ¸ì¡Œì„ ë•Œ ì–´ë–¤ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•  ê²ƒì¸ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•œë‹¤.



**DispatcherServlet ë‚´ë¶€ ë™ì‘íë¦„ ìƒì„¸ - ë·° ë Œë”ë§ ê³¼ì •**

![](https://cphinf.pstatic.net/mooc/20180219_66/1519004113425TanBR_PNG/7.png)

> **org.springframework.web.servlet.ViewResolver**
>
> - ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë¦¬í„´í•œ ë·° ì´ë¦„ì„ ì°¸ê³ í•´ì„œ ì ì ˆí•œ ë·° ì˜¤ë¸Œì íŠ¸ë¥¼ ì°¾ì•„ì£¼ëŠ” ë¡œì§ì„ ê°€ì§„ ì „ëµ ì˜¤í”„ì íŠ¸ì´ë‹¤.
> - ë·°ì˜ ì¢…ë¥˜ì— ë”°ë¼ ì ì ˆí•œ ë·° ë¦¬ì¡¸ë²„ë¥¼ ì¶”ê°€ë¡œ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆë‹¤.



**DispatcherServlet ë‚´ë¶€ ë™ì‘íë¦„ ìƒì„¸ - ìš”ì²­ ì²˜ë¦¬ ì¢…ë£Œ**

![](https://cphinf.pstatic.net/mooc/20180219_296/1519004150778ofOPV_PNG/8.png)

***

### 3) Spring MVCë¥¼ ì´ìš©í•œ ì›¹ í˜ì´ì§€ ì‘ì„± ì‹¤ìŠµ

web-appìœ¼ë¡œ maven project ìƒì„±.. xml íŒŒì¼ ë³€ê²½.. navigatorì—ì„œ mainì— javaí´ë” ìƒì„±.. maven project update..

#### **DispatcherServletì„ FrontControllerë¡œ ì„¤ì •í•˜ê¸°**

- web.xml íŒŒì¼ì— ì„¤ì •
- javax.servlet.ServletContainerInitializer ì‚¬ìš©
  \- ì„œë¸”ë¦¿ 3.0 ìŠ¤í™ ì´ìƒì—ì„œ web.xmlíŒŒì¼ì„ ëŒ€ì‹ í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- org.springframework.web.WebApplicationInitializer ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì„œ ì‚¬ìš©

**web.xmlíŒŒì¼ì—ì„œ DispatcherServlet ì„¤ì •í•˜ê¸° 1/2**

![](https://cphinf.pstatic.net/mooc/20180219_194/151900563324539bbk_PNG/1.png)

> **xml spring ì„¤ì • ì½ì–´ë“¤ì´ë„ë¡ DispathcerServletì„¤ì •**
>
> servlet-class: ì‹¤ì œë¡œ ë‚´ê°€ ë™ì‘ì‹œí‚¬ í´ë˜ìŠ¤. Springì´ ì œê³µí•˜ëŠ” DispatcherServletì´ìš©.

![](https://cphinf.pstatic.net/mooc/20180219_25/1519005657037r4xE4_PNG/2.png)

> **Java config spring ì„¤ì • ì½ì–´ë“¤ì´ë„ë¡ DispathcerServletì„¤ì •** -> ì‹¤ìŠµì—ì„œ ì‚¬ìš©
>
> init-param ë¶€ë¶„ì— xmlíŒŒì¼ì´ ì•„ë‹ˆë¼ ìë°” í´ë˜ìŠ¤ ì´ë¦„ -> ìë°” config íŒŒì¼ ì½ì–´ì˜¤ëŠ” ê²ƒ
>
> servlet-mapping: url -> "/" ëª¨ë“  ìš”ì²­ ë°›ì•„ë“¤ì´ëŠ” ê²ƒ , servlet-nameê³¼ ê°™ì€ ì´ë¦„ìœ¼ë¡œ ë§¤í•‘ë˜ì–´ìˆëŠ” servlet-classê°€ ì‹¤í–‰



**WebApplicationInitializerë¥¼ êµ¬í˜„í•´ì„œ ì„¤ì •í•˜ê¸° 1/2** - Springì´ ì œê³µí•˜ëŠ” ë°©ì‹

- Spring MVCëŠ” ServletContainerInitializerë¥¼ êµ¬í˜„í•˜ê³  ìˆëŠ” SpringServletContainerInitializerë¥¼ ì œê³µí•œë‹¤.
- SpringServletContainerInitializerëŠ” WebApplicationInitializer êµ¬í˜„ì²´ë¥¼ ì°¾ì•„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê³  í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ onStartup ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì´ˆê¸°í™”í•œë‹¤.

![](https://cphinf.pstatic.net/mooc/20180219_225/15190057369849AXoR_PNG/3.png)



#### Spring MVC ì„¤ì •

- kr.or.connect.webmvc.config.WebMvcContextConfiguration

![](https://cphinf.pstatic.net/mooc/20180219_209/1519005776948gyaN4_PNG/4.png)

> DispatcherServletì— ëŒ€í•œ ì„¤ì • = web.xmlì—ì„œ
>
> DispatcherServletì´ ì½ì–´ë“¤ì—¬ì•¼ ë  ì„¤ì •ì€ ë³„ë„ë¡œ!! ğŸ‘‰ ìë°” configë¡œ
>
> DispatcherServletì€ í•´ë‹¹ ì„¤ì • íŒŒì¼ì„ ì½ì–´ë“¤ì—¬ì„œ ë‚´ë¶€ì ìœ¼ë¡œ Spring ì»¨í…Œì´ë„ˆì¸ ApplicationContextë¥¼ ìƒì„±

**@Configuration**

- org.springframework.context.annotationì˜ Configuration ì• ë…¸í…Œì´ì…˜ê³¼ Bean ì• ë…¸í…Œì´ì…˜ ì½”ë“œë¥¼ ì´ìš©í•˜ì—¬ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìƒˆ ë¡œìš´ ë¹ˆ ê°ì²´ë¥¼ ì œê³µí•  ìˆ˜ ìˆë‹¤.
- ìë°” config íŒŒì¼ì´êµ¬ë‚˜ í•˜ëŠ” ê²ƒì„ ì•Œë ¤ì£¼ëŠ” ì—­í• 

**@EnableWebMvc**

- DispatcherServletì˜ RequestMappingHandlerMapping, RequestMappingHandlerAdapter, ExceptionHandlerExceptionResolver, MessageConverter ë“± **Webì— í•„ìš”í•œ ë¹ˆë“¤ì„ ëŒ€ë¶€ë¶„ ìë™ìœ¼ë¡œ ì„¤ì •**í•´ì¤€ë‹¤.
- xmlë¡œ ì„¤ì •í–ˆë‹¤ë©´ <mvc:annotation-driven/> ì™€ ë™ì¼í•˜ë‹¤.
- ê¸°ë³¸ ì„¤ì • ì´ì™¸ì˜ ì„¤ì •ì´ í•„ìš”í•˜ë‹¤ë©´ WebMvcConfigurerAdapter ë¥¼ ìƒì†ë°›ë„ë¡ Java config classë¥¼ ì‘ì„±í•œ í›„, í•„ìš”í•œ ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”© í•˜ë„ë¡ í•œë‹¤.

**@ComponentScan**

- ComponentScanì• ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ë©´ Controller, Service, Repository, Componentì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ì°¾ì•„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ê²Œ ëœë‹¤.
- DefaultAnnotationHandlerMappingê³¼ RequestMappingHandlerMappingêµ¬í˜„ì²´ëŠ” ë‹¤ë¥¸ í•¸ë“œëŸ¬ ë§¤í•‘ë³´ë‹¤ í›¨ì”¬ ë” ì •êµí•œ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤. ì´ ë‘ ê°œì˜ êµ¬í˜„ì²´ëŠ” ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ ë§¤í•‘ ê´€ê³„ë¥¼ ì°¾ëŠ” ë§¤ìš° ê°•ë ¥í•œ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆë‹¤. ì´ë“¤ êµ¬í˜„ì²´ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì¦‰ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ì— ìˆëŠ” ìš”ì²­ ì²˜ë¦¬ ë¹ˆì—ì„œ RequestMappingì• ë…¸í…Œì´ì…˜ì„ í´ë˜ìŠ¤ë‚˜ ë©”ì†Œë“œì—ì„œ ì°¾ì•„ HandlerMappingê°ì²´ë¥¼ ìƒì„±í•˜ê²Œ ëœë‹¤.
  * HandlerMappingì€ ì„œë²„ë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì„ ì–´ëŠ í•¸ë“¤ëŸ¬ë¡œ ì „ë‹¬í• ì§€ ê²°ì •í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.
- DefaultAnnotationHandlerMappingì€ DispatcherServletì´ ê¸°ë³¸ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê¸°ë³¸ í•¸ë“¤ëŸ¬ ë§µí•‘ ê°ì²´ì´ê³ , RequestMappingHandlerMappingì€ ë” ê°•ë ¥í•˜ê³  ìœ ì—°í•˜ì§€ë§Œ ì‚¬ìš©í•˜ë ¤ë©´ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤.

**WebMvcConfigurerAdapter**

- org.springframework.web.servlet.config.annotation. WebMvcConfigurerAdapter
- @EnableWebMvc ë¥¼ ì´ìš©í•˜ë©´ ê¸°ë³¸ì ì¸ ì„¤ì •ì´ ëª¨ë‘ ìë™ìœ¼ë¡œ ë˜ì§€ë§Œ, ê¸°ë³¸ ì„¤ì • ì´ì™¸ì˜ ì„¤ì •ì´ í•„ìš”í•  ê²½ìš° í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì€ í›„, ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”© í•˜ì—¬ êµ¬í˜„í•œë‹¤.

***



**Controller(Handler) í´ë˜ìŠ¤ ì‘ì„±í•˜ê¸°**

- @Controller ì• ë…¸í…Œì´ì…˜ì„ í´ë˜ìŠ¤ ìœ„ì— ë¶™ì¸ë‹¤.
- ë§µí•‘ì„ ìœ„í•´ @RequestMapping ì• ë…¸í…Œì´ì…˜ì„ í´ë˜ìŠ¤ë‚˜ ë©”ì†Œë“œì—ì„œ ì‚¬ìš©í•œë‹¤.
  * ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ ì–´ë–¤ URLë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì¸ì§€ ì•Œì•„ë‚´ì„œ ì‹¤ì œë¡œ ì²˜ë¦¬í•´ì•¼ ë˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë­”ì§€, ê·¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ êµ¬í˜„í•˜ê³ ìˆëŠ” ë©”ì†Œë“œê°€ ë­”ì§€ ì•Œì•„ë‚´ê¸° ìœ„í•´..

**@RequestMapping**

- Http ìš”ì²­ê³¼ ì´ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ Controller ì˜ ë©”ì†Œë“œë¥¼ ì—°ê²°í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜
- Http Method ì™€ ì—°ê²°í•˜ëŠ” ë°©ë²•
   \- @RequestMapping(value="/users", method=RequestMethod.POST)
   \- From Spring 4.3 version (@GetMapping, @PostMapping, @PutMapping, @DeleteMapping, @PatchMapping)
- Http íŠ¹ì • í•´ë”ì™€ ì—°ê²°í•˜ëŠ” ë°©ë²•
   \- @RequestMapping(method = RequestMethod.GET, headers = "content-type=application/json")
- Http Parameter ì™€ ì—°ê²°í•˜ëŠ” ë°©ë²•
   \- @RequestMapping(method = RequestMethod.GET, params = "type=raw")
- Content-Type Header ì™€ ì—°ê²°í•˜ëŠ” ë°©ë²•
   \- @RequestMapping(method = RequestMethod.GET, consumes = "application/json")
- Accept Header ì™€ ì—°ê²°í•˜ëŠ” ë°©ë²•
   \- @RequestMapping(method = RequestMethod.GET, produces = "application/json")



**Spring MVCê°€ ì§€ì›í•˜ëŠ” Controllerë©”ì†Œë“œ ì¸ìˆ˜ íƒ€ì…**

- javax.servlet.ServletRequest
- **javax.servlet.http.HttpServletRequest**
- org.springframework.web.multipart.MultipartRequest
- org.springframework.web.multipart.MultipartHttpServletRequest
- javax.servlet.ServletResponse
- **javax.servlet.http.HttpServletResponse**
- **javax.servlet.http.HttpSession**
- org.springframework.web.context.request.WebRequest
- org.springframework.web.context.request.NativeWebRequest
- java.util.Locale
- java.io.InputStream
- java.io.Reader
- java.io.OutputStream
- java.io.Writer
- javax.security.Principal
- java.util.Map
- org.springframework.ui.Model
- org.springframework.ui.ModelMap
- **org.springframework.web.multipart.MultipartFile**
- javax.servlet.http.Part
- org.springframework.web.servlet.mvc.support.RedirectAttributes
- org.springframework.validation.Errors
- org.springframework.validation.BindingResult
- org.springframework.web.bind.support.SessionStatus
- org.springframework.web.util.UriComponentsBuilder
- org.springframework.http.HttpEntity<?>
- Command ë˜ëŠ” Form ê°ì²´

ğŸ‘‰ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë©”ì†Œë“œì— í•´ë‹¹ ë¶€ë¶„ì„ ì„ ì–¸ë§Œ í•´ì£¼ë©´ ë¨.



**Spring MVCê°€ ì§€ì›í•˜ëŠ” ë©”ì†Œë“œ ì¸ìˆ˜ ì• ë…¸í…Œì´ì…˜**

- **@RequestParam**
- **@RequestHeader**
- **@RequestBody**
- @RequestPart
- **@ModelAttribute**
- **@PathVariable**
- @CookieValue



**@RequestParam**

- Mappingëœ ë©”ì†Œë“œì˜ Argumentì— ë¶™ì¼ ìˆ˜ ìˆëŠ” ì–´ë…¸í…Œì´ì…˜
- @RequestParamì˜ nameì—ëŠ” http parameterì˜ nameê³¼ ë§¤í•‘
- @RequestParamì˜ requiredëŠ” í•„ìˆ˜ì¸ì§€ ì•„ë‹Œì§€ íŒë‹¨

**@PathVariable**

- @RequestMappingì˜ pathì— ë³€ìˆ˜ëª…ì„ ì…ë ¥ë°›ê¸° ìœ„í•œ place holderê°€ í•„ìš”í•¨  (?ë³€ìˆ˜ëª…=ê°’)
- place holderì˜ ì´ë¦„ê³¼ PathVariableì˜ name ê°’ê³¼ ê°™ìœ¼ë©´ mapping ë¨
- required ì†ì„±ì€ default true ì„

**@RequestHeader**

- ìš”ì²­ ì •ë³´ì˜ í—¤ë” ì •ë³´ë¥¼ ì½ì–´ë“¤ ì¼ ë•Œ ì‚¬ìš©
- @RequestHeader(name="í—¤ë”ëª…") String ë³€ìˆ˜ëª…



**Spring MVCê°€ ì§€ì›í•˜ëŠ” ë©”ì†Œë“œ ë¦¬í„´ ê°’**

- **org.springframework.web.servlet.ModelAndView**
- org.springframework.ui.Model
- java.util.Map
- org.springframework.ui.ModelMap
- org.springframework.web.servlet.View
- **java.lang.String**
- java.lang.Void
- org.springframework.http.HttpEntity<?>
- org.springframework.http.ResponseEntity<?>
- **ê¸°íƒ€ ë¦¬í„´ íƒ€ì…**



ğŸ’£EL í‘œê¸°ë²•ì„ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œ -> web.xmlíŒŒì¼ì—ì„œ ë²„ì „ì´ 2_3ìœ¼ë¡œ ë˜ì–´ìˆì–´ì„œ...?!

-> ìœ—ì¤„ ì•„ì˜ˆ ì‚­ì œí•˜ê³  <?xml version="1.0" encoding="UTF-8"?> ì…ë ¥

ì„œë²„ì—ì„œ í”„ë¡œì íŠ¸ ì‚­ì œí•˜ê³  ë‹¤ì‹œ Run

ğŸ’£ì˜¤ë¥˜ íŒ? Project->Clean

***



**Controllerì‘ì„± ì‹¤ìŠµ 1/3**

1. ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8080/mvcexam/plusform ì´ë¼ê³  ìš”ì²­ì„ ë³´ ë‚´ë©´ ì„œë²„ëŠ” ì›¹ ë¸Œë¼ìš°ì €ì—ê²Œ 2ê°œì˜ ê°’ì„ ì…ë ¥ë°›ì„ ìˆ˜ ìˆëŠ” ì…ë ¥ ì°½ê³¼ ë²„íŠ¼ì´ ìˆëŠ” í™”ë©´ì„ ì¶œë ¥í•œë‹¤.
2. ì›¹ ë¸Œë¼ìš°ì €ì— 2ê°œì˜ ê°’ì„ ì…ë ¥í•˜ê³  ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ http://localhost:8080/mvcexam/plus URLë¡œ 2ê°œì˜ ì…ë ¥ê°’ì´ POSTë°©ì‹ìœ¼ë¡œ ì„œë²„ì—ê²Œ ì „ë‹¬í•œë‹¤. ì„œë²„ëŠ” 2ê°œì˜ ê°’ì„ ë”í•œ í›„, ê·¸ ê²°ê³¼ ê°’ì„ JSPì—ê²Œ request scopeìœ¼ë¡œ ì „ë‹¬í•˜ì—¬ ì¶œë ¥í•œë‹¤.



 **Controllerì‘ì„± ì‹¤ìŠµ 2/3**

1. http://localhost:8080/mvcexam/userform ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ ì´ë¦„, email, ë‚˜ì´ë¥¼ ë¬¼ì–´ë³´ëŠ” í¼ì´ ë³´ì—¬ì§„ë‹¤.
2. í¼ì—ì„œ ê°’ì„ ì…ë ¥í•˜ê³  í™•ì¸ì„ ëˆ„ë¥´ë©´ postë°©ì‹ìœ¼ë¡œ http://localhost:8080/mvcexam/regist ì— ì •ë³´ë¥¼ ì „ë‹¬í•˜ê²Œ ëœë‹¤.
3. registì—ì„œëŠ” ì…ë ¥ë°›ì€ ê²°ê³¼ë¥¼ ì½˜ì†” í™”ë©´ì— ì¶œë ¥í•œë‹¤.

 

**Controllerì‘ì„± ì‹¤ìŠµ 3/3**

1. http://localhost:8080/mvcexam/goods/{id} ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
2. ì„œë²„ëŠ” idë¥¼ ì½˜ì†”ì— ì¶œë ¥í•˜ê³ , ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì € ì •ë³´ë¥¼ ì½˜ì†”ì— ì¶œë ¥í•œë‹¤.
3. ì„œë²„ëŠ” HttpServletRequestë¥¼ ì´ìš©í•´ì„œ ì‚¬ìš©ìê°€ ìš”ì²­í•œ PATHì •ë³´ë¥¼ ì½˜ì†”ì— ì¶œë ¥í•œë‹¤.