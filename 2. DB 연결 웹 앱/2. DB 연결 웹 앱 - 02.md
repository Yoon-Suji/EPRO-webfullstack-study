# 2. DB 연결 웹 앱

## 2. WEB UI 개발 - FE

### 1) Window 객체(setTimeout)

* window 객체에는 많은 메소드 존재, 디폴트 개념이므로(전역객체) 생략할 수 있음.

* **setTimeout()** - **비동기**로 실행

  ```javascript
  function run() {
      console.log("start");
      setTimeout(function() {
          var msg = "hello codesquad";
          console.log(msg);  //1000ms(1초) 후에 실행됨.
      }, 1000);
      console.log("end");
  }
  
  run();
  ```

  * 자바스크립트는 함수를 인자로 받을 수 있음.(함수를 반환하는 것도 가능)
  * https://www.youtube.com/watch?v=8aGhZQkoFbQ (11분~16분) 참고
  * setTimeout이 실행되면, setTimeout 안의 익명함수(1번째 인자)는 브라우저(Web API)가 일단 hold하고 있다가, 주어진 시간(2번째 인자) 만큼이 지나면 event queue(혹은 task queue)로 이동해 대기 ➡ event queue에서 계속 대기하고 있다가, **call stack이 비워지면**, 즉 stack에 아무런 코드도 없는 상황이 되면 그 때 콜 스택과 테스트 큐를 주시하고 있던 **이벤트 루프**가 task queue의 call back을 스택에 넣어줌.
  * setTimeout 0 -> **스택이 비어있을 때까지 기다리게 하기 위함**

* 스택이 다 비워지고 나서 비동기는 마지막에 실행. 이벤트 큐라는 곳에 보관되어 있다가 나중에 실행.

* **setInterval()** : 특정 동작을 반복적으로 수행하기 위해 사용.

  ex) 

  갤러리 형식의 뷰를 만들어 이미지를 정해진 시간 간격으로 바꾸어 적용하는 경우
  일정 시간 간격으로 배너광고를 바꾸면서 보여줄 경우
  일정 주기로 계속해서 서버와 통신이 필요한 경우 



### 2) DOM과 querySelector

* **DOM**: 브라우저에서는 HTML코드를 DOM(Document Object Model)이라는 객체형태의 모델로 저장함. -> 이렇게 저장된 정보를 **DOM Tree**
* Dom Tree를 탐색 및 조작하기 위해 **DOM API**(동적으로 HTML 의 DOM 엘리먼트를 생성하고 조절하는 함수묶음) 제공
*  document.**getElementById()**: ID 정보를 통해서 찾을 수 있음
* document.**querySelector()**: **css selector** 문법을 이용해서 DOM에 접근할 수 있음
* document.**querySelectorAll()**: 해당하는 모든 element를 노드리스트 형태로 반환
* https://doolyit.tistory.com/30 참고링크



### 3) Browser Event, Event object, Event handler

* An **event** can be triggered by the user action e.g. clicking the mouse button or tapping keyboard, or generated by APIs to represent the progress of an asynchronous task.

* 이벤트 등록: **addEventListener()** 함수 이용

  ```javascript
  var el = document.querySelector(".outside");
  el.addEventListener("click", function(e){
      console.log("clicked", e);
      console.log(e.target);
      console.log(e.target.nodeName);
  });
  ```

* https://developer.mozilla.org/en-US/docs/Web/API/Event#introduction
* https://developer.mozilla.org/ko/docs/Web/Events



### 4) Ajax 통신의 이해

* **Ajax (XMLHTTPRequest 통신, Asynchronous JavaScript and XML)**: Ajax 기술은 비동기로 서버로부터 데이터를 가져오는 것

  * 예전에는 일부 데이터만 갱신하고 싶어도 페이지 전체를 받아와야 해서 낭비가 많았음 -> 비동기적으로 작업을 수행함으로써 페이지 전체가 아닌 일부분만 변경 가능

  * Ajax 통신으로는 XML, Plain Text, JSON 등 다양한 포맷의 데이터를 주고받을 수 있지만, 일반적으로 사용이 편리한 **JSON포맷**으로 데이터를 주고 받음

* XMLHTTPRequest 객체를 사용하는 표준방법

  ```javascript
  var oReq = new XMLHttpRequest();
  oReq.addEventListener("load", function(){
      console.log(this.responseText);
  });
  
  oReq.open("GET", "/2. json.txt");
  oReq.send();
  ```

  **XMLHttpRequest객체를 생성**해서, **open메서드로 요청을 준비**하고, **send메서드로 서버로 보냄** 

  요청처리가 완료되면(서버에서 응답이 오면) **load이벤트가 발생**하고, **콜백함수가 실행**

  콜백함수가 실행될 때는 이미 **ajax함수는 반환하고 콜스택에서 사라진 상태** 

  이는 setTimeout함수의 콜백함수의 실행과 유사하게 동작하는 **'비동기'로직**

* https://huns.me/posts/2014-04-20-ajax-cors-overview

  CORS에 대한 설명 참고.. 어렵다..



### 5) JavaScript Debugging

* 크롬 개발자 도구 자바스크립트 디버깅
  - Pause, Continue : 첫 번째 버튼은 평소에는 Pause 버튼 상태인데 브렉포인트가 잡힌 상태에선 Continue 버튼이 됩니다. 다른 브레이크포인트가 잡힐 때까지 코드를 진행합니다.
  - Step over next function call : 스텝 오버는 코드 라인을 한 스탭 진행하는데 현재 실행 라인에 함수 실행 코드가 있다면 함수는 실행하는데 이때 함수 안의 코드로는 진입하지 않습니다. 즉 라인의 함수를 실행만 하게 됩니다.
  - Step into next function call : 스텝 인투는 스텝 오버와 다르게 현재 실행 라인의 코드에 함수가 있다면 함수 안의 첫 번째 코드로 진입해 들어가 다시 하나씩 라인별로 코드를 실행할 수 있습니다.
  - Step out of current function : 스텝 인투로 들어온 함수를 끝까지 실행하고 밖으로 빠져나와 해당 함수를 실행한 함수로 돌아갑니다.
  - Active/Deactive breakpoint : 브레이크포인트를 끄거나 켤 수 있습니다.
  - Pause on exception : 자바스크립트 예외가 발생하면 해당 위치에 브레이크포인트를 잡아줍니다.

